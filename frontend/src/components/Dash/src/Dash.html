<div class="dashboard-container">

  <!-- 游녦 BIENVENIDO -->
  <div class="welcome-box text-center mb-4">
    <h1 class="welcome-title fw-bold">
      游녦 Bienvenido <span class="text-success">{{ userRole === 'admin' ? 'Administrador' : userName }}</span>
    </h1>
  </div>

  <h1 class="dashboard-title">Panel de Gesti칩n de Stock</h1>

  <!-- FORMULARIO -->
  <div class="form-card">

    <div class="form-row">
      <label>Nombre del producto</label>
      <input
        type="text"
        class="form-control"
        v-model.trim="formData.nombre"
        @input="formDirty.nombre = true"
      />
      <div v-if="errorNombre.mostrar" class="error-msg">
        {{ errorNombre.mensaje }}
      </div>
    </div>

    <div class="form-row">
      <label>Descripci칩n</label>
      <textarea
        class="form-control"
        rows="3"
        v-model.trim="formData.descripcion"
        @input="formDirty.descripcion = true"
      ></textarea>
      <div v-if="errorDescripcion.mostrar" class="error-msg">
        {{ errorDescripcion.mensaje }}
      </div>
    </div>

    <div class="form-row">
      <label>Precio</label>
      <input
        type="number"
        class="form-control"
        v-model.number="formData.precio"
        @input="formDirty.precio = true"
      />
      <div v-if="errorPrecio.mostrar" class="error-msg">
        {{ errorPrecio.mensaje }}
      </div>
    </div>

    <div class="form-row">
      <label>Stock</label>
      <input
        type="number"
        class="form-control"
        v-model.number="formData.stock"
        @input="formDirty.stock = true"
        min="0"
      />
      <div v-if="errorStock.mostrar" class="error-msg">
        {{ errorStock.mensaje }}
      </div>
    </div>

    <div class="form-row">
      <label>URL de imagen</label>
      <input
        type="text"
        class="form-control"
        v-model="formData.img_url"
        @input="formDirty.img_url = true"
      />
      <div v-if="errorImgUrl.mostrar" class="error-msg">
        {{ errorImgUrl.mensaje }}
      </div>
    </div>

    <button
      class="btn-submit"
      :disabled="botonDeshabilitado"
      @click="guardarProducto"
    >
      {{ modoEdicion ? "Guardar Cambios" : "Guardar Producto" }}
    </button>

  </div>

  <!-- TABLA -->
  <h2 class="inventario-title">Inventario Actual</h2>

  <table class="product-table">
    <thead>
      <tr>
        <th>Producto</th>
        <th>Precio</th>
        <th>Stock</th>
        <th>Acciones</th>
      </tr>
    </thead>

    <tbody>
      <tr v-for="producto in productos" :key="producto.id">
        <td>{{ producto.nombre }}</td>
        <td>${{ producto.precio }}</td>
        <td>{{ producto.stock }}</td>
        <td class="acciones">
          <button class="btn-edit" @click="editarProducto(producto)">Editar</button>
          <button class="btn-delete" @click="eliminarProducto(producto.id)">Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>

<!-- 游늵 ESTAD칈STICAS GENERALES -->
<div class="stats-section">

  <div class="stats-header">
    <span class="stats-icon">游늵</span>
    <h2>Estad칤sticas Generales</h2>
  </div>

  <div class="stats-row">

    <div class="stat-box">
      <div class="stat-circle green">游닍</div>
      <h4>Total de productos</h4>
      <p class="stat-value">{{ stats.totalProductos }}</p>
    </div>

    <div class="stat-box">
      <div class="stat-circle blue">游</div>
      <h4>Precio promedio</h4>
      <p class="stat-value">${{ stats.precioPromedio }}</p>
    </div>

    <div class="stat-box">
      <div class="stat-circle orange">拘勇</div>
      <h4>Precio m칤nimo</h4>
      <p class="stat-value">${{ stats.precioMin }}</p>
    </div>

    <div class="stat-box">
      <div class="stat-circle purple">拘勇</div>
      <h4>Precio m치ximo</h4>
      <p class="stat-value">${{ stats.precioMax }}</p>
    </div>

  </div>
</div>

<!-- 游눯 DISTRIBUCI칍N -->
<div class="stats-section">

  <div class="stats-header">
    <span class="stats-icon">游눯</span>
    <h2>Distribuci칩n por Rangos de Precio</h2>
  </div>

  <div class="stats-row">

    <div class="stat-box">
      <div class="stat-circle green-light">游릭</div>
      <h4>Baratos (&lt; 10.000)</h4>
      <p class="stat-value">{{ analytics.baratos }}</p>
    </div>

    <div class="stat-box">
      <div class="stat-circle yellow">游리</div>
      <h4>Medios (10.000 - 50.000)</h4>
      <p class="stat-value">{{ analytics.medios }}</p>
    </div>

    <div class="stat-box">
      <div class="stat-circle red">游댮</div>
      <h4>Caros (&gt; 50.000)</h4>
      <p class="stat-value">{{ analytics.caros }}</p>
    </div>

  </div>
</div>

</div>
